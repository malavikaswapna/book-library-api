{"ast":null,"code":"var _jsxFileName = \"/home/codio/workspace/book-library-frontend/src/Books.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport styles from './BookList.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Books() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true); // Track loading state\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchBooks = async () => {\n      console.log(\"Fetching books...\");\n      const username = localStorage.getItem('username');\n      const password = localStorage.getItem('password');\n      if (!username || !password) {\n        console.warn(\"No username or password found in localStorage\");\n        navigate('/login');\n        return;\n      }\n      const credentials = btoa(`${username}:${password}`);\n      try {\n        const response = await axios.get('https://harlembazaar-londonfiber-1025.codio-box.uk/books', {\n          headers: {\n            'Authorization': `Basic ${credentials}`\n          }\n        });\n        console.log(\"Response received:\", response.data);\n        setBooks(response.data);\n      } catch (error) {\n        console.error(\"Error fetching books:\", error);\n        alert(\"Failed to fetch books.\");\n        navigate('/login');\n      } finally {\n        setLoading(false); // Stop loading when the fetch is complete\n      }\n    };\n    fetchBooks();\n  }, [navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.loading,\n      children: \"Loading books...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this) // Loading message\n    : books.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.booksGrid,\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.bookCard,\n        onClick: () => navigate(`/book/${book.id}`) // Navigate to book details on click\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.bookTitle,\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.bookAuthor,\n          children: [\"by \", book.author]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.bookYear,\n          children: [\"Published: \", book.published_year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), book.average_rating && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.bookRating,\n          children: [\"Rating: \", book.average_rating, \" \\u2B50\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this), book.genre && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.bookGenre,\n          children: [\"Genre: \", book.genre]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this)]\n      }, book.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No books available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) // In case there are no books\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(Books, \"7UN8U3FvwfEM1cS43TTnoTn9Efc=\", false, function () {\n  return [useNavigate];\n});\n_c = Books;\nexport default Books;\nvar _c;\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","styles","jsxDEV","_jsxDEV","Books","_s","books","setBooks","loading","setLoading","navigate","fetchBooks","console","log","username","localStorage","getItem","password","warn","credentials","btoa","response","get","headers","data","error","alert","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","length","booksGrid","map","book","bookCard","onClick","id","bookTitle","title","bookAuthor","author","bookYear","published_year","average_rating","bookRating","genre","bookGenre","_c","$RefreshReg$"],"sources":["/home/codio/workspace/book-library-frontend/src/Books.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport styles from './BookList.module.css';\n\nfunction Books() {\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true); // Track loading state\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      console.log(\"Fetching books...\");\n\n      const username = localStorage.getItem('username');\n      const password = localStorage.getItem('password');\n\n      if (!username || !password) {\n        console.warn(\"No username or password found in localStorage\");\n        navigate('/login'); \n        return;\n      }\n\n      const credentials = btoa(`${username}:${password}`);\n\n      try {\n        const response = await axios.get('https://harlembazaar-londonfiber-1025.codio-box.uk/books', {\n          headers: {\n            'Authorization': `Basic ${credentials}`,\n          },\n        });\n\n        console.log(\"Response received:\", response.data);\n        setBooks(response.data);\n      } catch (error) {\n        console.error(\"Error fetching books:\", error);\n        alert(\"Failed to fetch books.\");\n        navigate('/login');\n      } finally {\n        setLoading(false);  // Stop loading when the fetch is complete\n      }\n    };\n\n    fetchBooks();\n  }, [navigate]);\n\n  return (\n    <div className={styles.container}>\n      {loading ? (\n        <p className={styles.loading}>Loading books...</p>  // Loading message\n      ) : books.length > 0 ? (\n        <div className={styles.booksGrid}>\n          {books.map((book) => (\n            <div\n              key={book.id}\n              className={styles.bookCard}\n              onClick={() => navigate(`/book/${book.id}`)}  // Navigate to book details on click\n            >\n              \n              <h3 className={styles.bookTitle}>{book.title}</h3>\n              <p className={styles.bookAuthor}>by {book.author}</p>\n              <p className={styles.bookYear}>Published: {book.published_year}</p>\n\n              {/* Display average rating */}\n              {book.average_rating && (\n                <p className={styles.bookRating}>Rating: {book.average_rating} ‚≠ê</p>\n              )}\n\n              {/* Display genre */}\n              {book.genre && (\n                <p className={styles.bookGenre}>Genre: {book.genre}</p>\n              )}\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p>No books available.</p>  // In case there are no books\n      )}\n    </div>\n  );\n}\n\nexport default Books;\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}